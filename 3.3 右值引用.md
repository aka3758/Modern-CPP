# 3.3 右值引用

我感觉，右值引用绝对是现代 C++ 中最重要的特性。解决了很多历史遗留问题。

右值引用消除了诸如 std::vector、std::string 等容器额外的开销，也使得函数对象容器 std::function 成为了可能。

## 左值、右值、纯右值、将亡值

我们先详细区分一些现代 C++ 中的各种值

### 左值

英文是 lvaleu，全称是 loactor value。表示的是存储在内存中、有明确存储地址（可寻址）的数据。

### 右值

英文是 rvalue，全称是 read value。表示的是那些可以提供数据值的数据（不一定可以寻址，例如存储于寄存器中的数据）。

书上这里写的非常不好，不单单是把英文名称弄错了。而且还把左值和右值的定义搞错了。左值和右值跟处在赋值符号的左边还是右边没有关系。如下代码：

```C++
int a = 10;
int b = a;  //这里的 a 和 b 用上那套理论解释不了
```

关于左值和右值，B神(C++之父)以及C++委员会根本就没有给过这个名称。这个名称应该是翻译软件出来的，而且非常不符合原意。C++ 中也没有书上的那个可以把左值当作右值使用的特性。例如上面 b = a。

B神原话：

For all the values, there were only two independent properties:

"has identity" – i.e. an address, a pointer, the user can determine whether two copies are identical, etc.
"can be moved from" – i.e. we are allowed to leave to source of a "copy" in some indeterminate, but valid state.
There are four possible composition:

iM: has identity and cannot be moved from (defined as lvalue)
im: has identity and can be moved from (defined as xvalue)
Im: does not have identity and can be moved from (defined as prvalue)
IM: doesn't have identity and cannot be moved (他认为这种情况在 C++ 中是没有用的)
