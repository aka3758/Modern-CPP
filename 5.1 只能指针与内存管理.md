# 5.1 RAII 与引用计数

引用计数的目的是为了防止内存泄漏产生的。

基本思路：对于动态分配的对象，进行引用计数，每当增加一次对同一个对象的引用，那么引用计数就会增加一次；每删除一次引用，引用计数就会减一；当一个对象的引用计数减为零的时候，就自动删除指向的堆内存。

传统 C++ 中，一定记得手动开辟，手动释放，总不是最佳实践。通常做法是对于一个对象而言，我们在构造函数的时候申请空间，而在析构函数的时候释放空间，这也就是常说的RAII 资源获取即初始化技术。

凡事都会有例外，我们也有时需要将对象在自由存储上分配的要求。在传统 C++ 中，我们只好使用 new 和 delete 去对资源进行操作。

C++11 引入了智能指针的概念，运用了引用计数，让程序要不再需要关心手动释放内存。

这些智能指针包括 std::shared_ptr/std::unique_ptr/std::weak_ptr，使用它们需要包含头文件 \<memory>。

注意：引用计数不是垃圾回收，引用计数能够尽快回收不再使用的对象，同时在过程中也不会长时间等待，更能够清晰明确的表明资源的生命周期。
